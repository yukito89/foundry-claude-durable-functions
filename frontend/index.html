<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
        <title>設計書アップロード</title>
        <link rel="stylesheet" href="style.css" />
        <script src="auth.js"></script>
    </head>
    <body>
        <noscript>
            <h1>JavaScriptを有効にしてください</h1>
            <p>このサイトはJavaScriptが必要です。</p>
        </noscript>
        <div class="container" style="display:none;" id="mainContent">
            <h1>単体テスト仕様書生成</br>（Claude Sonnet 4.5）</h1>
            <div style="text-align: right; margin-bottom: 10px;">
                <a href="history.html" style="color: #4CAF50; text-decoration: none;">📋 処理履歴を見る</a>
            </div>

            <!-- モード選択 -->
            <div class="mode-selection">
                <label>生成モード：</label>
                <div class="radio-group-horizontal">
                    <label class="radio-label-inline">
                        <input type="radio" name="mode" value="normal" checked />
                        <span>通常版</span>
                    </label>
                    <label class="radio-label-inline">
                        <input type="radio" name="mode" value="diff" />
                        <span>差分版</span>
                    </label>
                </div>
            </div>

            <!-- 通常版ファイル入力 -->
            <div id="normalMode" class="mode-content">
                <div class="file-inputs">
                    <label>詳細設計書（Excel形式）：</label>
                    <input type="file" id="fileInput" accept=".xlsx" multiple />
                </div>
            </div>

            <!-- 差分版ファイル入力 -->
            <div id="diffMode" class="mode-content" style="display:none;">
                <div class="file-section old-version">
                    <h2>📁 旧版ファイル（必須）</h2>
                    <div class="file-inputs">
                        <label>旧版 構造化設計書（.md）：</label>
                        <input type="file" id="oldStructuredMd" accept=".md" required />
                    </div>
                    <div class="file-inputs">
                        <label>旧版 テスト仕様書（.md）：</label>
                        <input type="file" id="oldTestSpecMd" accept=".md" required />
                    </div>
                </div>
                <div class="file-section new-version">
                    <h2>📄 新版ファイル（必須）</h2>
                    <div class="file-inputs">
                        <label>新版 設計書（.xlsx）：</label>
                        <input type="file" id="newExcelFiles" accept=".xlsx" multiple required />
                    </div>
                </div>
            </div>

            <!-- 粒度選択 -->
            <div class="granularity-selection">
                <label>テスト仕様書の粒度：</label>
                <div class="radio-group">
                    <label class="radio-label">
                        <input type="radio" name="granularity" value="simple" checked />
                        <span>簡易版</span>
                        <small>テストケースと期待結果を簡潔に記載</small>
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="granularity" value="detailed" />
                        <span>詳細版</span>
                        <small>前提条件・事前データ・操作手順を詳細に記載</small>
                    </label>
                </div>
            </div>

            <br />
            <button id="uploadBtn">アップロードして生成</button>

            <!-- 進捗バー -->
            <div id="progressContainer" class="progress-container" style="display:none;">
                <div class="progress-bar-wrapper">
                    <div id="progressBar" class="progress-bar"></div>
                </div>
                <p id="progressText" class="progress-text">処理中...</p>
            </div>

            <p id="status"></p>
        </div>
        <script>
            document.getElementById('mainContent').style.display = 'block';
            console.log('HTML読み込み完了');
        </script>
        <script>
            console.log('script.js読み込み開始');
        </script>
        <script src="script.js?v=13"></script>
        <script>
            console.log('script.js読み込み完了');
        </script>
    </body>
</html>